<div class="content">
    <div id='block1'>
    <br>
        MY PLAN
    </div>
<br>

    <div *ngIf="isEdit == false&&isDelete ==false && isCoplanning == false && showPlan==false;else ">
        <div id="font" *ngFor="let item of plan; let i = index" (click)="moveToPlandetail(item.plan_id);showPlan=true">
             <p class="uppercase">{{item.plan_name}}</p>
        </div>
        <div id="font" *ngFor="let item of coplan; let i = index" (click)="moveToPlandetail(item.plan_id);showPlan=true">
            <p class="uppercase">{{item.plan_name}} (CO-PLAN)</p>
        </div>
    </div>

    <ng-template #edit [ngIf]="isEdit == true &&isDelete ==false">

        <!--  here -->
        <div style="font-size:40px;color:white;text-align:center">{{tripName}}</div>
        <br>
        <div style="float:left;font-size:20px">{{departDate}} </div>
        <div style="float:right;font-size:20px">{{returnDate}}</div>
        <br>
        <div style="text-align:center;font-size:20px">{{resultDate}} day</div>
        <br>
        <div *ngIf="isHide == false ;else hide ">

            <div *ngFor="let d of days;let j =index;">

                <mat-toolbar style="background:rgb(19, 155, 218);color:white">

                    <span>Day{{j+1}}({{days[j].thatDate}}) </span>
                    <span clasee="example-spacer"> </span>
                    <button mat-button [matMenuTriggerFor]="appMenu">
                        <mat-icon>add</mat-icon>
                    </button>

                </mat-toolbar>
                <br>

                <mat-menu #appMenu="matMenu">
                    <div *ngFor="let activity of activities;let index =index;"> 
                    <button mat-menu-item (click)="act_temp = activities[index].type ;isActCreate[j]=true;">{{activities[index].type}}</button>
                    <!--  ex activites (need database) -->
    
                    <!--  ex activites (need database) -->
                    </div>
                </mat-menu>


                <table id="table">
                    <thead id="table-odd">
                    </thead>
                    <tr id="table-even" *ngFor="let act of d.acts;let i =index;">

                        <td style="color:white;padding-left:30px;padding-right: 30px;">{{i+1}}</td>

                        <td style="color:white;padding-right: 30px;">{{days[j].times[i]}}</td>

                        <td style="color:white;padding-right: 30px;">{{days[j].details[i]}}</td>

                        <td style="color:white;padding-right: 30px;">{{days[j].acts[i]}}</td>

                        <td>
                            <button mat-button (click)="removeActs(i,j)">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </td>
                    </tr>
                </table>

                <!-- ?????????? -->
                <div *ngIf="isActCreate[j] == true ;else ">
                    <!-- condition for showing set_activities_detail -->
                    <div style="float:left;width: 90%">
                        <table id="table" style="background:white;width:100%">
                            <thead id="table-even">
                                <th>Time</th>
                                <th>Detail</th>
                                <th>Activity</th>
                            </thead>
                            <td>
                                <input type="time" [(ngModel)]="time" required />
                                <br>
                            </td>

                            <td>
                                <input type="text" placeholder="detail" [(ngModel)]="detail" required />
                                <br>
                            </td>
                            <td>
                                {{act_temp}}
                            </td>
                            <!-- button for addActivities to database (from addActs()) -->

                        </table>
                    </div>
                    <div style="float:right;width: 10%">
                        <br>
                        <button class="btn btn-primary btn-block btn-large" (click)="addActs(act_temp,time,detail,j);detail='';time='';">submit</button>
                    </div>
                    <br>
                    <br>
                    <div style="color:red;float:left">{{status2}}</div>
                    <br>

                </div>

            </div>



            <!-- <button routerLink="/generateplan">generateplan !!</button> <button type="button" class="btn btn-primary" (click)="isHide= true"> Generate Plan</button>  -->
            <div class="block" style="font-size:14px; float:right; margin-right:20px; margin-top:350px; ">
                <button type="button" class="btn sixth" (click)="isHide= true" >Generate Plan</button>
            </div>
            

        </div>
    </ng-template>
<!--ji comment<ng-template [ngIf]="isEdit==false">
            <div class="block">
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:50px;" (click)="moveToPlandetail(plan_id); isEdit = true ; isDelete = false ;isCoplanning = false; showPlan =flase">EDIT</button>
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:5px;" (click)="moveToPlandetail(plan_id); isEdit = false; isDelete = true  ;isCoplanning = false; delete_temp = plan_id  ">DELETE</button>
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:5px;" (click)="moveToPlandetail(plan_id); isEdit = false; isDelete = false ;isCoplanning = true;  isDelete =false ">Co-Planning </button>
                </div>       
        </ng-template>-->

    <ng-template #hide [ngIf]="showPlan==true">

        
        
        <button *ngFor="let d of days;let j =index;" class="btn btn-primary" (click)="dayShowing(j,resultDate)">day {{j+1}}</button>
        <div *ngFor="let d of days;let j =index">
            <div *ngIf="dayShow[j] == true ;else ">
                <a>
                    day:{{days[j].thatDate}}
                </a>

                <table>

                    <thead>
                        <th *ngFor="let act of days[j].acts;let l =index;">{{act}}</th>
                    </thead>
                    <td *ngFor="let act of days[j].acts;let l =index;">

                        <img src={{getActivity(act)}}  style="width:48px;height:48px;background:white"> </td>
                    <!-- activity image (j =index) -->


                    <table id="table">
                        <thead id="table-odd">
                            <th>Index</th>
                            <th>Time</th>
                            <th>Detail</th>
                            <th>Activitie</th>

                        </thead>
                        <br>
                        <tr id="table-even" style="background:white;width:100%" *ngFor="let act of d.acts;let i =index;">

                            <td>{{i+1}}</td>

                            <td>{{days[j].times[i]}}</td>

                            <td>{{days[j].details[i]}}</td>

                            <td>{{days[j].acts[i]}}</td>
                        </tr>
                    </table>
                    <thead>
                        <th></th>

                    </thead>

                </table>

            </div>
        </div>
        <ng-template [ngIf]="isEdit==true">

                <div class="block" style=" float: right; margin-top:350px;  margin-right:20px;">
                        <button class="btn sixth" (click)="confirm();">confirm</button>
                </div>

        </ng-template>

        <ng-template [ngIf]="isEdit==false">
            <div class="block">
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:50px;" (click)="moveToPlandetail(plan_id); isEdit = true ; isDelete = false ;isCoplanning = false; showPlan =flase">EDIT</button>
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:5px;" (click)="moveToPlandetail(plan_id); isEdit = false; isDelete = true  ;isCoplanning = false; delete_temp = plan_id  ">DELETE</button>
                <button class="btn one" style="font-size: 10px; float: left; margin-top:10px;  margin-left:5px;" (click)="moveToPlandetail(plan_id); isEdit = false; isDelete = false ;isCoplanning = true;  isDelete =false ">Co-Planning </button>
                </div>       
        </ng-template>

    </ng-template>


    <!-- deletepage -->

    <ng-template #deletepage [ngIf]="isEdit == false &&isDelete ==true">

            <label>
                    <span  class="btn one" style="font-size:10px;">CONFIRM DELETE</span>
                    <input type="checkbox" />
                    <div class="confirm-modal">
                      <form action="#do-something" method="get">
                        <div id="font" style="color:rgb(46, 46, 46)">Are you absolutely sure you want to delete</div>
                        <br>
                        <button class="btn one" (click)="deletePlan(delete_temp)" >Yes</button>
                        <!--<button class="btn one" href="#0">No</button>-->
                      </form>
                    </div>
            </label>
        <br>
        <!--<button (click)="deletePlan(delete_temp)">confirm delete</button>-->

    </ng-template>

    <ng-template #coplanning [ngIf]="isCoplanning == true">

        <input type="text" placeholder="put your co-planner username" [(ngModel)]="co_username" required />
        <div class="block" style=" float: right; margin-top:348px;  margin-right:20px;">
                <button class="btn sixth" (click)="Co_Confirm()">confirm</button>
        </div>
    </ng-template>
    <ng-template #back_butoon [ngIf]='isEdit==true||isDelete==true||isCoplanning==true||showPlan==true'>
            <div class="block" style="  margin-top:350px;">
                <button class="btn sixth" (click)="this.ngOnInit()" >BACK</button>
            </div>
    </ng-template>

</div>